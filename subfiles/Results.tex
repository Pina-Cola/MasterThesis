\documentclass[../MasterThesis.tex]{subfiles}
\graphicspath{ {./assets/images/} }


%----------------------------------------------------------------------------
%----------------------------------------------------------------------------

\begin{document}
	
	
%
%
%
%
%=======================================================================================================
%
%
%
%
%=======================================================================================================
% CHAPTER: RESULTS AND EVALUATION
%=======================================================================================================
\newpage
\section{Comparison of Video Colour Grading Results} \label{section:experimentalevaluationanddiscussion}  
% \section{Experimental Evaluation and Discussion} \label{section:experimentalevaluationanddiscussion}


In this Chapter, the results of the user sided colour grading with JIT are compared to the results of the colour grading with the Melt framework and KDEN Live, which uses the Melt framework as a backend. For the comparison, frames of the original video file, the frames created by the JIT implementation and the Melt framework or KDEN Live are compared with and without the application of filters.


To evaluate the difference in the frames and the filter application between the tested components, the frames are extracted. Those tests were run on the same computer to ensure consistency and the frames were extracted with taking screenshots of the output or pre-existing frame extraction functions.
Then the colours of the images have been subtracted from each other using the \textit{grain extract} function in GIMP. 
This method was described in Section~\ref{subsection:ComparisonOfDifferentColourSaturations}.


In the Figures~\ref{figure:greyresult_unit} and \ref{figure:greyresult_blurry}, two different results of colour subtraction can be seen. Figure~\ref{figure:greyresult_unit} shows the subtraction of an image from itself. This results in a uniformly grey image, because the images are identical. Figure~\ref{figure:greyresult_blurry} shows the subtractions of two separate screenshots of the same frame. Small distortions can be seen, which is caused by slightly different scaling or other inconsistencies in the screenshot process. Those small differences have to be considered in the comparison, because the images can not be expected to be exactly the same, when extracting them from different sources.


\begin{minipage}{0.48\textwidth}
	
	\begin{figure}[H]
		\begin{center}
			\cutpic{0cm}{0.99\textwidth}{sameVSsame.png}
			\caption[Colour subtraction of the same file from itself.]{Colour subtraction of the same file from itself results in a uniformly grey image.}
			\label{figure:greyresult_unit}
		\end{center}
	\end{figure}
\end{minipage}\begin{minipage}{0.04\textwidth}
	\ 
\end{minipage}\begin{minipage}{0.48\textwidth}	
	\begin{figure}[H]
		\begin{center}
			\cutpic{0cm}{0.99\textwidth}{simVSsim.png}
			\caption[Colour subtraction of the same frame but a different screenshot.]{Colour subtraction of the same frame but a different screenshot, which results in slight distortions.}
			\label{figure:greyresult_blurry}
		\end{center}
	\end{figure}
\end{minipage}









\subsection{Comparison with the Melt Framework} \label{section:comparisonMelt}


In this Section, the results of video colour grading using the locally installed Melt framework and the in Section~\ref{subsection:implementation} described implementation with JIT compared. 
Those tests were run on the same computer to ensure consistency and the frames were extracted with taking screenshots of the output from both approaches. These extracted frames are then visually inspected. 


%-------------------------------------------------------------------------------------------------------
% \subsubsection*{Testing} 
% Discuss the testing methodologies and present validation results.




% \vspace*{2em}
For the evaluation, a comparison between the locally installed Melt version and the Accurate Player sliders with the red value on maximum was tested. The filter was applied to frame 343 and the results of the locally installed Melt framework can be seen in Figure~\ref{figure:redMelt} and in the Accurate Player frontend in Figure~\ref{figure:redAP}. In this Figures it can be seen, that the red tone of the two frames differs. In Figure~\ref{figure:redAP}, the colours seem more dark or saturated.


\begin{minipage}{0.48\textwidth}
	
	\begin{figure}[H]
		\begin{center}
			\cutpic{0.3cm}{0.99\textwidth}{red_Melt.png}
			\caption[Frame 343 after the application of the red filter in the Melt framework.]{Frame 343 after the application of the maximum value for red in the Melt framework.}
			\label{figure:redMelt}
		\end{center}
	\end{figure}
\end{minipage}\begin{minipage}{0.04\textwidth}
	\ 
\end{minipage}\begin{minipage}{0.48\textwidth}
	
	\begin{figure}[H]
		\begin{center}
			\cutpic{0.3cm}{0.99\textwidth}{red_AP.png}
			\caption[Frame 343 after the application of the red filter in the Accurate Player.]{Frame 343 after the application of the maximum value for red in the Accurate Player.}
			\label{figure:redAP}
		\end{center}
	\end{figure}
\end{minipage}

\vspace*{2em}
Considering the visual difference in the frame extractions from the two different approaches to apply the filter, the subtraction of those two frames shows more differences than the expected distortions, that were described above. The result of the subtraction can be seen in Figure~\ref{figure:filterVSfilter}, which shows the difference in the two compared frame extractions.

In Figure~\ref{figure:filterVSfilter}, the extracted frame of the Melt framework was subtracted from the frame of the Accurate Player.
In this case, the result has a red tone itself, because the seemingly less red saturated frame was subtracted from the seemingly more saturated frame. Because of this, the pixels that were a deeper red in the Accurate Player frame have higher red values than the corresponding pixels in the Melt framework extraction. This causes the red tone in the resulting image in Figure~\ref{figure:filterVSfilter}.
The result reflects the relative differences in the red value between the two frames. This result has a red tone and no green areas, which shows that the frame of the Accurate Player has overall a more saturated red tone than the extracted frame of the Melt framework.


\begin{figure}[H]
	\begin{center}
		\cutpic{0.3cm}{0.65\textwidth}{filterVSfilter.png}
		\caption[Subtraction of the two different frames (Accurate Player - Melt).]{Subtraction of the same frame with filter application: Local Melt frame is subtracted from the frame of the Accurate Player.}
		% JIT - Melt
		\label{figure:filterVSfilter}
	\end{center}
\end{figure}

To evaluate, if this difference is caused by the application of the filter or by other aspects, for example video compression or difference in video players, the frames are compared without the filter applied to them. For this, frame 343 of the original video file is compared to the same frame extraction of the locally installed Melt framework and the Accurate Player without the application of the filter. The frame from the original video file can be seen in Figure~\ref{figure:nofilterO}.

\begin{figure}[H]
	\begin{center}
		\cutpic{0.3cm}{0.65\textwidth}{nofilter_org.png}
		\caption[Frame 343 without filter application in the original video file.]{Frame 343 without filter application in the original video file.}
		\label{figure:nofilterO}
	\end{center}
\end{figure}


In Figure~\ref{figure:nofilterMelt}, the extraction of frame 343 without a filter from the locally installed Melt framework can be seen and in comparison in Figure~\ref{figure:nofilterAP}, the frame extraction from the Accurate Player without a filter can be seen. Figure~\ref{figure:nofilterAP} seems to be a more saturated.


\begin{minipage}{0.48\textwidth}
	\begin{figure}[H]
		\begin{center}
			\cutpic{0.3cm}{0.99\textwidth}{nofilter_melt.png}
			\caption[Frame 343 without filter application in the Melt framework.]{Frame 343 without filter application in the Melt framework.}
			\label{figure:nofilterMelt}
		\end{center}
	\end{figure}
\end{minipage}\begin{minipage}{0.04\textwidth}
	\ 
\end{minipage}\begin{minipage}{0.48\textwidth}
	\begin{figure}[H]
		\begin{center}
			\cutpic{0.3cm}{0.99\textwidth}{nofilter_ap.png}
			\caption[Frame 343 without filter application in the Accurate Player.]{Frame 343 without filter application in the Accurate Player.}
			\label{figure:nofilterAP}
		\end{center}
	\end{figure}
\end{minipage}

\vspace*{2em}
In Figure~\ref{figure:oVSmelt}, the subtraction of the original frame and the Meltframework frame extraction are visualized using GIMP. In Figure~\ref{figure:oVSap} in comparison, the subtraction was done with the original frame and the Accurate Player extraction. Figure~\ref{figure:oVSap} shows the expected result, for a same output, while it is visible in Figure~\ref{figure:oVSmelt}, that the output from the locally installed Melt framework and the original video frame differs, too.


\begin{minipage}{0.48\textwidth}
	\begin{figure}[H]
		\begin{center}
			\cutpic{0.3cm}{0.99\textwidth}{oVSmelt.png}
			\caption[Subtraction of the Melt frame from the original frame.]{Subtraction of the Melt frame from the original frame.}
			% O - Melt
			\label{figure:oVSmelt}
		\end{center}
	\end{figure}
\end{minipage}\begin{minipage}{0.04\textwidth}
	\ 
\end{minipage}\begin{minipage}{0.48\textwidth}
	\begin{figure}[H]
		\begin{center}
			\cutpic{0.3cm}{0.99\textwidth}{oVSap.png}
			\caption[Subtraction of Accurate Player frame from the original frame.]{Subtraction of Accurate Player frame from the original frame.}
			% O - JIT
			\label{figure:oVSap}
		\end{center}
	\end{figure}
\end{minipage}





% It is noted that while the colour grading results are expected to be consistent across both implementations, discrepancies in the appearance of the video output have been observed. 
% One potential factor contributing to these discrepancies could be variations in the video player used within the Melt framework, although this remains uncertain. The following screenshots illustrate the differences observed between the two setups.




%-------------------------------------------------------------------------------------------------------
% \subsubsection*{Evaluation and Comparison}
% Evaluate the system's performance against defined criteria.
\vspace*{2em}
The extracted frames from the different approaches display significant differences, even when no filters were applied. 
These differences of the video file without filters make it difficult to evaluate additional data regarding the application of filters using this method. The cause for the different display of the video frames by the Melt video player remains unclear. 
% It is worth noting that the Melt video player is recognized for encountering occasional technical issues.











\subsection{Comparison with KDEN Live} \label{section:comparisonKDENLive}


% \vspace*{-1em}
\begin{minipage}{0.48\textwidth}
	
	In this Section, the results of video colour grading using KDEN Live and the in Section~\ref{subsection:implementation} described implementation with JIT compared. In Figure~\ref{figure:kdenlive_effects}, the list of categories for the effects can be seen. This includes the \textit{Color and Image correction} option, which will be examined in the following. The aim is to find the options for the RGB colour adjustment and compare the results. With those results it can probably be seen, if KDEN Live uses the \texttt{avfilter.colorbalance} filter or a different filter for the adjustment of the RGB values. For the comparison of
	
	
\end{minipage}\begin{minipage}{0.04\textwidth}
	\ 
\end{minipage}\begin{minipage}{0.48\textwidth}
	\begin{figure}[H]
		\begin{center}
			\cutpic{0.3cm}{0.9\textwidth}{kdenlive_effects.png}
			\caption[List of effect menus in KDEN Live.]{List of effect menus in KDEN Live.}
			\label{figure:kdenlive_effects}
		\end{center}
	\end{figure}
	\hfill
\end{minipage}

\vspace*{-0.8em}

the filter applications, the usage of the \texttt{avfilter.colorbalance} filter in KDEN Live would have apositive effect on the evaluation process and results. To compare different filters is a difficult task, because it cannot be evaluated if the reults are the

\vspace*{-0.6em}
\begin{minipage}{0.48\textwidth}
	
	\begin{figure}[H]
	\begin{center}
		\cutpic{0.3cm}{0.9\textwidth}{kdenlive_effekte.png}
		\caption[List of colour effects in KDEN Live.]{List of colour effects in KDEN Live.}
		\label{figure:kdenlive_effekte}
	\end{center}
	\end{figure}
	\hfill
	
	
\end{minipage}\begin{minipage}{0.04\textwidth}
	\ 
\end{minipage}\begin{minipage}{0.48\textwidth}

same but criteria considering the expected or more useful outcome have to be considered, which does not lay in the field of computer science.

In the effect category \textit{Color and Image correction}, different effects can be found. The list of effects in this category can be seen in in Figure~\ref{figure:kdenlive_effekte}. Those effect options were examined and \textit{RGB adjustment} seems to be the only effect, that is adjusting the colour of the produced video with RGB values. For example \textit{3 point balance} adjusts the values for black, gray and white.

\end{minipage}

In Figure~\ref{figure:kdenlive_rgb}, the RGB colour sliders of the effect \textit{RGB adjustment} can be seen. The following different actions can be chosen: Change gamma, add constant, multiply. For each of those actions, a comparison through colour subtraction with the \textit{grain extract} in GIMP with the application of the \texttt{avfilter.colorbalance} is done.
The frames were extracted from the Accurate Player through taking screenshots of the output and in KDEN Live, the \textit{extract frame} function was used. These extracted frames are then visually inspected. 


\begin{figure}[H]
	\begin{center}
		\cutpic{0cm}{0.65\textwidth}{kdenlive_rgb.png}
		\caption[RGB colour adjustment in KDEN Live.]{RGB colour adjustment in KDEN Live.}
		\label{figure:kdenlive_rgb}
	\end{center}
\end{figure}


TODO other parameters description

\subsubsection*{Change gamma}



\begin{minipage}{0.48\textwidth}
	\begin{figure}[H]
		\begin{center}
			\cutpic{0.3cm}{0.99\textwidth}{red_AP.png}
			\caption[Frame 343 after the application of the red filter in the Accurate Player.]{Frame 343 after the application of the maximum value for red in the Accurate Player.}
			\label{figure:APframe1}
		\end{center}
	\end{figure}
\end{minipage}\begin{minipage}{0.04\textwidth}
	\ 
\end{minipage}\begin{minipage}{0.48\textwidth}
	\begin{figure}[H]
		\begin{center}
			\cutpic{0.3cm}{0.99\textwidth}{gamma.png}
			\caption[Frame 343 from KDEN Live with the action \textit{change gamma}.]{Frame 343 from KDEN Live with the action \textit{change gamma} in the red filter application.}
			\label{figure:gamma}
		\end{center}
	\end{figure}
\end{minipage}



\begin{figure}[H]
	\begin{center}
		\cutpic{0.3cm}{0.65\textwidth}{gamma_gimp.png}
		\caption[Subtraction of the two frames (KDEN Live (\textit{change gamma}) - Accurate Player).]{Subtraction of the two frames: Accurate Player frame is subtracted from the KDEN Live frame extraction (with the action \textit{change gamma}).}
		% KDENLive - JIT
		\label{figure:gammagimp}
	\end{center}
\end{figure}



\subsubsection*{Add constant}




\begin{minipage}{0.48\textwidth}
	\begin{figure}[H]
		\begin{center}
			\cutpic{0.3cm}{0.99\textwidth}{red_AP.png}
			\caption[Frame 343 after the application of the red filter in the Accurate Player.]{Frame 343 after the application of the maximum value for red in the Accurate Player.}
			\label{figure:APframe2}
		\end{center}
	\end{figure}
\end{minipage}\begin{minipage}{0.04\textwidth}
	\ 
\end{minipage}\begin{minipage}{0.48\textwidth}
	\begin{figure}[H]
		\begin{center}
			\cutpic{0.3cm}{0.99\textwidth}{addconstant.png}
			\caption[Frame 343 from KDEN Live with the action \textit{add constant}.]{Frame 343 from KDEN Live with the action \textit{add constant} in the red filter application.}
			\label{figure:addconstant}
		\end{center}
	\end{figure}
\end{minipage}



\begin{figure}[H]
	\begin{center}
		\cutpic{0.3cm}{0.65\textwidth}{addconstant_gimp.png}
		\caption[Subtraction of the two frames (KDEN Live (\textit{add constant}) - Accurate Player).]{Subtraction of the two frames: Accurate Player frame is subtracted from the KDEN Live frame extraction (with the action \textit{add constant}).}
		% KDENLive - JIT
		\label{figure:addconstantgimp}
	\end{center}
\end{figure}








\subsubsection*{Multiply}




\begin{minipage}{0.48\textwidth}
	\begin{figure}[H]
		\begin{center}
			\cutpic{0.3cm}{0.99\textwidth}{red_AP.png}
			\caption[Frame 343 after the application of the red filter in the Accurate Player.]{Frame 343 after the application of the maximum value for red in the Accurate Player.}
			\label{figure:APframe3}
		\end{center}
	\end{figure}
\end{minipage}\begin{minipage}{0.04\textwidth}
	\ 
\end{minipage}\begin{minipage}{0.48\textwidth}
	\begin{figure}[H]
		\begin{center}
			\cutpic{0.3cm}{0.99\textwidth}{multiply.png}
			\caption[Frame 343 from KDEN Live with the action \textit{multiply}.]{Frame 343 from KDEN Live with the action \textit{multiply} in the red filter application.}
			\label{figure:multiply}
		\end{center}
	\end{figure}
\end{minipage}



\begin{figure}[H]
	\begin{center}
		\cutpic{0.3cm}{0.65\textwidth}{multiply_gimp.png}
		\caption[Subtraction of the two frames (KDEN Live (\textit{multiply}) - Accurate Player).]{Subtraction of the two frames: Accurate Player frame is subtracted from the KDEN Live frame extraction (with the action \textit{multiply}).}
		% KDEN Live - JIT
		\label{figure:multiplygimp}
	\end{center}
\end{figure}



%-------------------------------------------------------------------------------------------------------
%-------------------------------------------------------------------------------------------------------
%\subsubsection{Testing}
% Discuss the testing methodologies and present validation results.

%-------------------------------------------------------------------------------------------------------
%\subsubsection{Evaluation and Comparison} 
% Evaluate the system's performance against defined criteria.
	
	
	
	
\end{document}