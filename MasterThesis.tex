\documentclass[12pt,a4paper]{article}
%----------------------------------------
% German language
% \usepackage[ngerman]{babel}
%----------------------------------------
% Input in UTF8 accepted
\usepackage[utf8]{inputenc}
%----------------------------------------
% Math-packages
\usepackage{mathtools}
\usepackage{amsmath}
\usepackage{amssymb}
%----------------------------------------
% Design choices (?)
%\usepackage{scrlayer-scrpage}
%\pagestyle{scrheadings}
% \clearscrheadfoot
%----------------------------------------
% Footnotes in tables
\usepackage{tablefootnote}
%----------------------------------------
%----------------------------------------
% no parindent
\usepackage{parskip}
\setlength{\parindent}{0em}
%----------------------------------------
% different gap between paragraphs
\setlength{\parskip}{1.3ex}
%----------------------------------------
% spacing between lines
\usepackage[onehalfspacing]{setspace}
%----------------------------------------
% Hurenkinder und Schusterjungen vermeiden
\clubpenalty = 10000
\widowpenalty = 10000
\displaywidowpenalty = 10000
%----------------------------------------
% Geometry package
\usepackage{geometry}
\geometry{
	paper=a4paper, % Change to letterpaper for US letter
	top=3cm, % Top margin
	bottom=3cm, % Bottom margin
	left=3cm, % Left margin
	right=3cm, % Right margin
	%showframe, % Uncomment to show how the type block is set on the page
}
%----------------------------------------
% References
\usepackage[backend=biber, maxbibnames=99, sortcites=true]{biblatex}
\addbibresource{references.bib}
%----------------------------------------
\usepackage{graphicx}
\graphicspath{ {./images/} }
%----------------------------------------
\usepackage[nottoc]{tocbibind}
%----------------------------------------
\usepackage[onehalfspacing]{setspace}
%----------------------------------------
% formats text "better"
\usepackage{microtype}
%----------------------------------------
% "better" tables
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{multirow}
\usepackage{makecell}
% for big tables
\usepackage{adjustbox}
%----------------------------------------
%Colours:
\usepackage[dvipsnames, table]{xcolor}
%----------------------------------------
% Definition Box
\usepackage[framemethod=TikZ]{mdframed}
\mdfdefinestyle{enviStyle}{
	innertopmargin = 10pt,
	linewidth      = 1pt,
	frametitlerule = true,
	roundcorner    = 2pt%
}
\usepackage{sectsty}
\newenvironment{CountingDefinition}[2][]{%
	\vspace*{1.7ex}
	\ifstrempty{#1}%
	{\mdfsetup{%
			frametitle={{\strut ~}}}
	}%
	{\mdfsetup{%
			frametitle={{\strut ~#1}}}%
	}%
	\mdfsetup{
		nobreak                   = true,
		linecolor                 = RedViolet,
		frametitlebackgroundcolor = RedViolet!50,
		style                     = enviStyle
	}
	\begin{mdframed}[]\relax%
		\label{#2}}{\end{mdframed}}
	%----------------------------------------
% Design
%\sectionfont{\color{RedViolet}}
%\subsectionfont{\color{RedViolet}}
\renewcommand{\labelitemi}{$\textcolor{RedViolet}{\bullet}$}
\renewcommand{\labelitemii}{$\textcolor{RedViolet}{\cdot}$}
\renewcommand{\labelitemiii}{$\textcolor{RedViolet}{\diamond}$}
\renewcommand{\labelitemiv}{$\textcolor{RedViolet}{\ast}$}
%----------------------------------------
% Position figures, etc.
\usepackage{float}
%----------------------------------------
% Lines and dotted lines and other designs
\usepackage{dashrule}
\usepackage{tikz}
\usepackage{tikzpagenodes}
%----------------------------------------
%----------------------------------------
% Hyperref package
\usepackage{hyperref}
\hypersetup{
	colorlinks=true,
	linkcolor=black,
	filecolor=black,      
	urlcolor=RedViolet,
	citecolor=black
}


%----------------------------------------------------------------------------
%----------------------------------------------------------------------------

\begin{document}
	
\pagenumbering{roman}


\begin{titlepage}	
	\begin{center}
	\centering
	\vspace*{-4em}
	\begin{tabularx}{\linewidth}{@{}lXr@{}}
		\makecell{\includegraphics[height=1.5cm]{umu.png}}
		& &\makecell{\includegraphics[height=0.7cm]{codemill.png}}\\
	\end{tabularx}\\%
	\vfill
	{\scshape\LARGE Ume\aa \  University \par}
	and \par 
	\vspace*{-0.8em}
	{\scshape\LARGE Codemill \par}
	\vspace{1cm}
	{\scshape\Large Master Thesis \par }
	\vspace{1.5cm}
	{\huge\bfseries Multimedia Processing: Exploring Real-Time Colour Correction and Grading with JIT \par}
	\vspace{2cm}
	{\Large Pina Kolling\par}
	% \texttt{ens21pkg@cs.umu.se} \par
	\vfill
	Supervised by\par
	Dr. Cem \textsc{Okulmus} \par 
	and \par 
	Urban \textsc{SÃ¶derberg} 
	
	\vfill
	
	% Bottom of the page
	{\large \today \par}
\end{center}
\end{titlepage}

%---------------------------------------------------------------------------------------------------



{\color{RedViolet} \rule{\textwidth}{1pt}}

{\color{RedViolet}\dotfill}

\begin{abstract}
	\noindent Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.
\end{abstract}
{\color{RedViolet}\dotfill}

{\color{RedViolet} \rule{\textwidth}{1pt}}

%---------------------------------------------------------------------------------------------------

\newpage


\setcounter{page}{1}

%\setstretch{0.6}

%\newgeometry{
%	top=2.5cm, % Top margin
%	left=2cm, % Left margin
%	right=3cm % Right margin
%}

%\begin{spacing}{0.7}
		
	\tableofcontents
	
%\end{spacing}

%\newgeometry{
%	top=3cm, % Top margin
%	left=2cm, % Left margin
%	right=3cm % Right margin
%}


%\setstretch{1.5}



\newpage

\pagenumbering{arabic}

\setcounter{page}{1} 
%

%
%
%
%
%=======================================================================================================
%
%
%
%
%=======================================================================================================
% CHAPTER: INTRODUCTION
%=======================================================================================================
\newpage
\section{Introduction} \label{section:introduction}


The popularity of streaming is growing, with an increasing number of people using online streaming platforms for their entertainment and approximately 1.8 billion subscriptions to video streaming services.~\cite{nielsen, stats}
%
With this increased popularity, the demand for user-driven real-time visual customization in the web browser for streamed videos has increased, too.


















%-------------------------------------------------------------------------------------------------------
\subsection{Motivation} 
% Provide context, highlight the problem space, and explain the motivation behind the project.

This thesis revolves around the implementation of video colour correction using Just-In-Time (JIT) techniques. The goal is to explore the feasibility of implementing the video grading process with JIT, with the focus on real-time colour correction. This project lies in the area of multimedia processing, video editing and real-time computing.

\begin{CountingDefinition}[JIT]{def:JIT}
	
	JIT (Just-In-Time), in the context of video files for streaming, refers to a dynamic software solution employed for real-time video transformation on a server. It is used for on-the-fly conversion of video files, optimizing them for streaming. The process includes the transformation of a video file, potentially one with non-web-friendly formats, into a more suitable format for the playback in web browsers.
	
\end{CountingDefinition}

The demand for efficient and dynamic video processing tools is increasing and with this, the ability to perform on-the-fly colour correction becomes increasingly valuable. 

The infrastructure of the system is visualized and explained in Chapter \ref{section:design-implementation}.




% The necessity for such on-the-fly adjustments arises from the inherent diversity in the way various devices interpret and display colours. Each device, ranging from monitors and TVs to smartphones and tablets, possesses unique characteristics that can significantly influence the perceived colour palette. Real-time colour correction at the user's end becomes imperative to ensure a consistent and personalized viewing experience across a myriad of devices.

%Moreover, with the exponential growth in the number of individuals engaging in streaming activities, the need for adaptable and user-controlled colour correction mechanisms becomes paramount. As more users embrace streaming platforms for content consumption, the challenge of catering to diverse device configurations intensifies. Real-time colour correction emerges as a solution that not only addresses the variability in device displays but also empowers users to tailor the visual aesthetics according to their preferences. This introduction sets the stage for a deeper exploration into the technological and user experience considerations driving the integration of real-time colour correction in the dynamic landscape of streaming.

%Certainly, there are several reasons why real-time colour correction by the user in streaming might be desirable:

%1. **Device Variability:** As mentioned earlier, different devices have distinct display characteristics. Users may prefer to adjust colours to compensate for variations in brightness, contrast, or colour rendering among devices.

%2. **Personal Preferences:** Everyone perceives colours differently, and personal preferences for visual aesthetics vary. Real-time colour correction empowers users to customize the viewing experience according to their individual tastes.

%3. **Environmental Conditions:** Lighting conditions in the viewing environment can impact how colours appear on the screen. Real-time colour correction allows users to adapt to different lighting situations, ensuring optimal visibility and comfort.

%4. **Accessibility Considerations:** Users with visual impairments or specific color perception needs may benefit from real-time colour correction to enhance visibility and distinguishability of on-screen elements.

%5. **Content Variety:** Streaming platforms offer a diverse range of content with varying visual styles. Real-time colour correction enables users to fine-tune colours based on the specific content they are watching, ensuring an immersive and tailored experience.

%6. **Cultural Differences:** Cultural preferences and associations with colours can vary globally. Real-time colour correction accommodates diverse cultural perspectives, allowing users to align the visual presentation with their cultural preferences.

%7. **Technological Advancements:** With advancements in display technologies, users may have access to devices with features like high dynamic range (HDR) or wide color gamuts. Real-time colour correction enables users to optimize viewing for these advanced display capabilities.

%These factors collectively contribute to the growing importance and demand for real-time colour correction capabilities in streaming, reflecting the desire for a more personalized and adaptable visual experience.







%-------------------------------------------------------------------------------------------------------
\subsection{Codemill\textsuperscript{TM}} 
% Provide context, highlight the problem space, and explain the motivation behind the project.

Codemill was originally founded in 2008 in Ume\aa \ (Sweden).~\cite{codemill_old, codemill_now} 
As of February 2024, they employs over 60 employees.~\cite{codemill} 
Codemill is an IT-Consulting company that focussed on the production and distribution of broadcast media. Their accurate video player that is described in Section \ref{subsection_accuratevideo}, is part of this thesis and a cloud native software that is being used by the world's leading studios, broadcasters and media service providers. ~\cite{codemill_linkedin, codemill_avp} 





% Test \cite{frida} and 






%-------------------------------------------------------------------------------------------------------
\subsection{Research Questions}
% Formulate specific research questions that your thesis aims to answer.

The project aims to address the feasibility (and potentially effectiveness) of implementing video colour correction using JIT in the context of real-time video streaming. The following question is relevant:

\begin{itemize}
	\item Is it possible to obtain colour-corrected video results on the fly, meaning in real-time, using JIT?
\end{itemize}

After answering this research question, the following questions might occur and be put into perspective:

\begin{itemize}
	\item Are there multiple solutions for implementing video colour correction, and if so, how do they compare in terms of performance, accuracy, and efficiency?
	\item How does the possibility of video colour correction expand potential applications of JIT in the domain of multimedia processing?
	\item What is the usability and performance of the proposed solution in real-world scenarios, regarding real-time video colour correction?
\end{itemize}

The aim is to contribute insights into the technological and scientific aspects of real-time video processing, exploring the possibilities and potential applications introduced by using JIT to implement colour grading. 










%-------------------------------------------------------------------------------------------------------
\subsection{Structure}
% Outline the structure of the thesis, briefly describing each chapter's content.










%-------------------------------------------------------------------------------------------------------
\subsection{Related Work} 

\cite{frida} (?)





%
%
%
%
%=======================================================================================================
%
%
%
%
%=======================================================================================================
% CHAPTER: Theroteical Background
%=======================================================================================================
\newpage
\section{Theoretical Background} \label{section:theoreticalbackground}



%-------------------------------------------------------------------------------------------------------
\subsection{Colour Correction and Colour Grading}







%
%
%
%
%=======================================================================================================
%
%
%
%
%=======================================================================================================
% CHAPTER: SYSTEM REQUIREMENTS AND SPECIFICATIONS
%=======================================================================================================
\newpage
\section{System Requirements and Specifications} \label{section:requirements}


%-------------------------------------------------------------------------------------------------------
\subsection{Accurate Video} \label{subsection_accuratevideo}
% Identify and describe the requirements from the end-user perspective.


%-------------------------------------------------------------------------------------------------------
\subsection{WebRTC}
% Identify and describe the requirements from the end-user perspective.


%-------------------------------------------------------------------------------------------------------
\subsection{User Requirements}
% Identify and describe the requirements from the end-user perspective.


%-------------------------------------------------------------------------------------------------------
\subsection{Technical Requirements}
% Detail the technical requirements for the system.





%
%
%
%
%=======================================================================================================
%
%
%
%
%=======================================================================================================
% CHAPTER: DESIGN AND IMPLEMENTATION
%=======================================================================================================
\newpage
\section{Design and Implementation} \label{section:design-implementation}







%-------------------------------------------------------------------------------------------------------
\subsection{Architecture Design}
% Describe the overall architecture of the system.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.6\textwidth]{IM2.png}
\end{figure}


\begin{CountingDefinition}[WebRTC]{def:WebRTC}
	
	Web Real-Time Communication (WebRTC), is a free, open-source project that provides web browsers and mobile applications with real-time communication. It enables direct communication between browsers or applications, allowing for peer-to-peer communication without the need for intermediary servers in certain scenarios.
	
\end{CountingDefinition}


The WebRTC connection serves as a direct communication channel between the browser and the backend, enabling real-time data exchange, involving audio, video, or other data streams. 


\begin{CountingDefinition}[h.264]{def:h264}
	
	h.264 refers to a video compression standard. In the context of real-time communication, h.264 is one of the video codecs that can be used to compress and decompress video streams.
	
\end{CountingDefinition}

WebRTC supports various video codecs, and h.264 is popular due to its efficiency in compressing video data while maintaining good quality. It is widely used for video conferencing, streaming, and other real-time communication applications. The video streams exchanged between the browser and the backend are encoded and decoded using h.264.


\begin{CountingDefinition}[Melt framework]{def:melt}
	
	The Melt framework (MLT) is a multimedia framework that is commonly used for video editing and playback. It provides a set of tools, libraries, and services for handling multimedia content, including video and audio. 
	
	
\end{CountingDefinition}

The connection from the Python backend to the Melt framework can use Melt's capabilities for video editing, processing, transcoding, rendering or playback. The system includes real-time communication via WebRTC, where Melt is involved in handling and manipulating video content.









%-------------------------------------------------------------------------------------------------------
\subsection{Technology}
% Discuss the technologies and tools chosen for the implementation.
Execution of the code:
\begin{CountingDefinition}[Setting up the code]{def:codesetup}
	\vspace*{-0.2em}
	\begin{itemize}
		\item Generate ssh key (\texttt{ssh-keygen}) and add to GitLab
		\item Clone git repositories (jit-webrtc and accurate-player-3-core)
		\item Install node.js and set path variables for npm (and yarn)
		\item Install and run docker
		\item Execute jit-webrtc code with command from README with the command \texttt{docker/main/main.sh --threads 16 --port 8080 \$VIDEOFILE}
		\item Execute accurate player code (run \texttt{npm install --force}, \texttt{npm install yarn} and then npm start, resolve errors, fix dependenciy problems with \texttt{npm audit fix --force} (potentially twice))
	\end{itemize}
	
\end{CountingDefinition}





%-------------------------------------------------------------------------------------------------------
\subsection{Implementation Details}
% Provide a detailed account of the implementation process.





%
%
%
%
%=======================================================================================================
%
%
%
%
%=======================================================================================================
% CHAPTER: RESULTS AND EVALUATION
%=======================================================================================================
\newpage
\section{Results and Evaluation} \label{section:results}


%-------------------------------------------------------------------------------------------------------
\subsection{Testing}
% Discuss the testing methodologies and present validation results.


%-------------------------------------------------------------------------------------------------------
\subsection{Evaluation and Comparison}
% Evaluate the system's performance against defined criteria.





%
%
%
%
%=======================================================================================================
%
%
%
%
%=======================================================================================================
% CHAPTER: CONCLUSION AND FUTURE WORK
%=======================================================================================================
\newpage
\section{Conclusion} \label{section:conclusion}


%-------------------------------------------------------------------------------------------------------
\subsection{Summary}
% Summarize the key findings and outcomes of the research.


%-------------------------------------------------------------------------------------------------------
\subsection{Contributions and Limitations}
% Highlight your contributions to the field.
% Discuss any limitations encountered during the research.


%-------------------------------------------------------------------------------------------------------
\subsection{Future Work}
% Suggest possible extensions or improvements to your work.





%
%
%
%
%=======================================================================================================
%
%
%
%
%=======================================================================================================
% REFERENCES
%=======================================================================================================
%\chapter*{References}
% Include a list of all references cited in the thesis.
	
	%-------------------------------------------------------------------------------------------	
	
	
	
	\newpage
	\addcontentsline{toc}{section}{References}
	\begin{spacing}{0.9}
		\printbibliography
	\end{spacing}
	
	
	
	
	
	
	
	
\end{document}